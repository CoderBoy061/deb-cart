{"ast":null,"code":"import _regeneratorRuntime from\"F:/assesment/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"F:/assesment/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"F:/assesment/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from\"react\";import Button from\"@mui/material/Button\";import axios from\"axios\";import{useHistory}from\"react-router-dom\";import\"./styles/payment.css\";import\"antd/dist/antd.css\";import{Spin}from\"antd\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Payment=function Payment(){var _useState=useState({}),_useState2=_slicedToArray(_useState,2),user=_useState2[0],setUser=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),loading=_useState4[0],setLoading=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,1),setPayment=_useState6[0];var history=useHistory();useEffect(function(){setUser(JSON.parse(localStorage.getItem(\"user_details\")));console.log(user);},[]);var makePayment=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var res,options,rzp1;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();setLoading(true);_context.next=4;return axios.post(\"https://online-debcart.herokuapp.com/createorder\");case 4:res=_context.sent;console.log(res.data);if(!(res.status!==200)){_context.next=8;break;}return _context.abrupt(\"return\");case 8:setLoading(false);options={key:\"rzp_test_Qey3iC23cu7rAo\",amount:res.data.amount,currency:res.data.currency,name:\"DebCart\",description:res.data.notes.title,image:res.data.notes.image,order_id:res.data.id,handler:function handler(response){localStorage.setItem(\"orderid\",JSON.stringify(response.razorpay_order_id));localStorage.setItem(\"paymentId\",JSON.stringify(response.razorpay_payment_id));setPayment(true);history.push(\"/admin\");},prefill:{name:user.name,email:user.email,contact:user.phone}};rzp1=new window.Razorpay(options);rzp1.open();rzp1.on(\"payment.failed\",function(response){alert(response.error.code);alert(response.error.description);alert(response.error.source);alert(response.error.step);alert(response.error.reason);alert(response.error.metadata.order_id);alert(response.error.metadata.payment_id);});case 13:case\"end\":return _context.stop();}}},_callee);}));return function makePayment(_x){return _ref.apply(this,arguments);};}();console.log(user.name);if(loading){return/*#__PURE__*/_jsx(\"div\",{style:{margin:0,padding:0,height:\"100vh\",display:\"flex\",justifyContent:\"center\",alignItems:\"center\",background:\"#ececec\"},children:/*#__PURE__*/_jsx(Spin,{tip:\"Loading....\"})});}return/*#__PURE__*/_jsxs(\"div\",{className:\"payment\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"name\",children:[\"Name: \",/*#__PURE__*/_jsx(\"strong\",{children:user.name})]}),/*#__PURE__*/_jsxs(\"p\",{className:\"email\",children:[\"Email : \",/*#__PURE__*/_jsx(\"strong\",{children:user.email})]}),/*#__PURE__*/_jsxs(\"p\",{className:\"phone\",children:[\"Phone: \",/*#__PURE__*/_jsx(\"strong\",{children:user.phone})]}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",onClick:function onClick(e){return makePayment(e);},style:{marginTop:\"1vh\"},children:\"Make payment\"})]});};export default Payment;","map":{"version":3,"sources":["F:/assesment/client/src/components/Payment.jsx"],"names":["React","useEffect","useState","Button","axios","useHistory","Spin","Payment","user","setUser","loading","setLoading","setPayment","history","JSON","parse","localStorage","getItem","console","log","makePayment","e","preventDefault","post","res","data","status","options","key","amount","currency","name","description","notes","title","image","order_id","id","handler","response","setItem","stringify","razorpay_order_id","razorpay_payment_id","push","prefill","email","contact","phone","rzp1","window","Razorpay","open","on","alert","error","code","source","step","reason","metadata","payment_id","margin","padding","height","display","justifyContent","alignItems","background","marginTop"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport Button from \"@mui/material/Button\";\r\nimport axios from \"axios\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport \"./styles/payment.css\";\r\nimport \"antd/dist/antd.css\";\r\nimport { Spin } from \"antd\";\r\n\r\nconst Payment = () => {\r\n  const [user, setUser] = useState({});\r\n  const [loading,setLoading]=useState(false);\r\n  const [ setPayment] = useState(false);\r\n  const history = useHistory();\r\n  useEffect(() => {\r\n    setUser(JSON.parse(localStorage.getItem(\"user_details\")));\r\n    console.log(user);\r\n  },[]);\r\n  const makePayment = async (e) => {\r\n    e.preventDefault();\r\n    setLoading(true);\r\n    const res = await axios.post(\"https://online-debcart.herokuapp.com/createorder\");\r\n    console.log(res.data);\r\n    if (res.status !== 200) {\r\n      return;\r\n    }\r\n    setLoading(false)\r\n    const options = {\r\n      key: \"rzp_test_Qey3iC23cu7rAo\",\r\n      amount: res.data.amount,\r\n      currency: res.data.currency,\r\n      name: \"DebCart\",\r\n      description: res.data.notes.title,\r\n      image: res.data.notes.image,\r\n      order_id: res.data.id,\r\n      handler: function (response) {\r\n        localStorage.setItem(\"orderid\",JSON.stringify(response.razorpay_order_id));\r\n        localStorage.setItem(\"paymentId\",JSON.stringify(response.razorpay_payment_id));\r\n        setPayment(true);\r\n        history.push(\"/admin\");\r\n      },\r\n      prefill: {\r\n        name: user.name,\r\n        email: user.email,\r\n        contact: user.phone,\r\n      },\r\n    };\r\n    var rzp1 = new window.Razorpay(options);\r\n    rzp1.open();\r\n    rzp1.on(\"payment.failed\", function (response) {\r\n      alert(response.error.code);\r\n      alert(response.error.description);\r\n      alert(response.error.source);\r\n      alert(response.error.step);\r\n      alert(response.error.reason);\r\n      alert(response.error.metadata.order_id);\r\n      alert(response.error.metadata.payment_id);\r\n    });\r\n  };\r\n  console.log(user.name);\r\n  if (loading) {\r\n    return (\r\n      <div\r\n        style={{\r\n          margin: 0,\r\n          padding: 0,\r\n          height: \"100vh\",\r\n          display: \"flex\",\r\n          justifyContent: \"center\",\r\n          alignItems: \"center\",\r\n          background: \"#ececec\",\r\n        }}\r\n      >\r\n        <Spin tip=\"Loading....\"></Spin>\r\n      </div>\r\n    );\r\n  }\r\n  return (\r\n    <div className=\"payment\">\r\n      <p className=\"name\">\r\n        Name: <strong>{user.name}</strong>\r\n      </p>\r\n      <p className=\"email\">\r\n        Email : <strong>{user.email}</strong>\r\n      </p>\r\n      <p className=\"phone\">\r\n        Phone: <strong>{user.phone}</strong>\r\n      </p>\r\n      <Button\r\n        variant=\"contained\"\r\n        onClick={(e) => makePayment(e)}\r\n        style={{ marginTop: \"1vh\" }}\r\n      >\r\n        Make payment\r\n      </Button>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Payment;\r\n"]},"metadata":{},"sourceType":"module"}